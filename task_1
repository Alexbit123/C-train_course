#include <iostream>

using namespace std;

int main() {
    // Считайте информацию о трёх домах, которые видит перед собой Марта,
    // а также показания очевидца.
    // Выведите номера тех домов (1, 2, 3) которые нужно посетить,
    // по одному номеру в каждой строке
    
    string house_color_first; // цвет дома
    int num_floors_first;     // количество этажей в доме
    
    string house_color_second; // цвет дома
    int num_floors_second;     // количество этажей в доме
    
    string house_color_third; // цвет дома
    int num_floors_third;     // количество этажей в доме
    
    string house_color_said; // цвет дома
    int num_floors_said;     // количество этажей в доме
    
    cin >> house_color_first >> num_floors_first >>  house_color_second >>
        num_floors_second >> house_color_third >>num_floors_third >>
        house_color_said >> num_floors_said;
    
    bool first_house_total_match = house_color_said==house_color_first && num_floors_said==num_floors_first;
    bool second_house_total_match = house_color_said==house_color_second && num_floors_said==num_floors_second;
    bool third_house_total_match = house_color_said==house_color_third && num_floors_said==num_floors_third;
    

    if (house_color_said=="!" && num_floors_said==-1){
        cout << 1 << endl;
        cout << 2 << endl;
        cout << 3 << endl;
        return 0;
    }
    // проверяю 1 дом
    if (first_house_total_match) {cout << 1 << endl;}

    // проверяю 2 дом
    if (second_house_total_match) {cout << 2 << endl;}

    // проверяю 3 дом
    if (third_house_total_match) {cout << 3 << endl;}

    if (!first_house_total_match && !second_house_total_match && !third_house_total_match){
        
        if // проверяю первый дом если нет полного совпадения
            (
            (house_color_said==house_color_first && num_floors_said == -1)
            ||
            (num_floors_said==num_floors_first && house_color_said == "!")          
            ){cout << 1 << endl;}
        
        if  (
            (house_color_said==house_color_second && num_floors_said == -1)
            ||
            (num_floors_said==num_floors_second && house_color_said == "!")          
            ){cout << 2 << endl;}
        
        if  (
            (house_color_said==house_color_third && num_floors_said == -1)
            ||
            (num_floors_said==num_floors_third && house_color_said == "!")          
            ){cout << 3 << endl;}
        

}
}
